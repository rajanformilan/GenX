<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GenX ‚Äî News Feed</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- General Layout --- */
        body { margin: 0; font-family: "Poppins", sans-serif; background: #f0f2f5; color: #1c1e21; }
        
        /* --- Professional Navbar --- */
        .navbar { 
            background-color: #1877f2; 
            color: white; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 0 20px; 
            height: 60px;
            position: sticky; 
            top: 0; 
            z-index: 100; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); 
        }
        .logo { font-size: 26px; font-weight: 800; letter-spacing: -1px; cursor: pointer; }
        
        .search-bar { flex: 1; margin: 0 20px; max-width: 400px; position: relative; }
        .search-bar input { 
            width: 100%; 
            padding: 10px 15px; 
            border-radius: 50px; 
            border: none; 
            outline: none; 
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 14px;
            transition: 0.3s;
        }
        .search-bar input::placeholder { color: #e0e0e0; }
        .search-bar input:focus { background: white; color: #333; }

        .menu-toggle { font-size: 28px; cursor: pointer; display: none; }

        .nav-links { list-style: none; display: flex; align-items: center; margin: 0; padding: 0; }
        .nav-links li { margin-left: 20px; }
        .nav-links a { 
            color: white; 
            text-decoration: none; 
            font-weight: 600; 
            font-size: 15px;
            transition: 0.2s;
        }

        @media (max-width: 850px) {
            .menu-toggle { display: block; }
            .nav-links { 
                display: none; 
                flex-direction: column; 
                position: absolute; 
                top: 60px; right: 0; width: 200px; 
                background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                border-radius: 0 0 0 10px;
            }
            .nav-links.active { display: flex; }
            .nav-links li { margin: 15px 0; width: 100%; text-align: center; }
            .nav-links a { color: #333; display: block; width: 100%; }
        }

        /* --- Feed --- */
        .feed { max-width: 600px; margin: 20px auto; padding: 0 10px; }
        .post { background: white; margin-bottom: 20px; padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .post-header { display: flex; justify-content: space-between; align-items: center; }
        .author-name { font-weight: 700; color: #1877f2; }
        .post-time { color: #65676b; font-size: 11px; }
        .post-text { margin: 12px 0; font-size: 15px; }
        .post img { width: 100%; border-radius: 8px; margin-top: 5px; }

        .actions { display: flex; border-top: 1px solid #eee; margin-top: 10px; padding-top: 5px; }
        .actions button { flex: 1; background: none; border: none; color: #65676b; cursor: pointer; font-weight: 600; padding: 8px; }
        .actions button.liked { color: #1877f2; }

        .comments-section { background: #f7f8fa; padding: 10px; border-radius: 8px; margin-top: 10px; }
        .comment-item { background: white; border-radius: 15px; padding: 6px 12px; margin-bottom: 5px; font-size: 13px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo">GenX</div>
        
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search people or posts...">
        </div>

        <div class="menu-toggle" id="menu-toggle">‚ò∞</div>

        <ul class="nav-links" id="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="authentication.html">Signup/Login</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="groups.html">Groups</a></li>
            <li><a href="friends.html">Friendship</a></li>
            <li><a href="chat.html">Chats</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="settings.html">Settings</a></li>
        </ul>
    </nav>

    <div class="feed" id="feedContainer">
        <div id="postsList"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menu-toggle');
            const navLinks = document.getElementById('nav-links');
            const searchInput = document.getElementById('searchInput');
            const postsList = document.getElementById('postsList');

            menuToggle.addEventListener('click', () => navLinks.classList.toggle('active'));

            // --- 1. Generator ---
            function generateBulkPosts(count = 200) {
                const authors = ["Aarav Shrestha", "Sita Rai", "Milan Kandel", "Tech Nepal", "GenX Official"];
                const texts = ["Exploring the mountains!", "Love the new GenX update.", "Coding is life.", "Who is ready for the weekend?", "Just had the best tea!"];
                const arr = [];
                for (let i = 0; i < count; i++) {
                    arr.push({
                        id: Date.now() - i,
                        authorName: authors[i % 5],
                        text: texts[i % 5] + " " + (i + 1),
                        image: i % 3 === 0 ? `https://picsum.photos/seed/${i}/600/400` : '',
                        likes: Math.floor(Math.random() * 100),
                        liked: false,
                        comments: [`<strong>User${i}</strong>: Nice post!`],
                        time: new Date(Date.now() - (i * 3600000)).toISOString()
                    });
                }
                return arr;
            }

            // --- 2. Data ---
            let posts = JSON.parse(localStorage.getItem('fbPosts')) || generateBulkPosts(200);
            const currentUser = { name: "Rajan Kandel" };

            // --- 3. Render Engine with Filter Support ---
            function renderFeed(filterText = "") {
                postsList.innerHTML = "";
                const term = filterText.toLowerCase();

                // Filter Logic: Check author name OR post text
                const filtered = posts.filter(post => 
                    post.authorName.toLowerCase().includes(term) || 
                    post.text.toLowerCase().includes(term)
                );

                if (filtered.length === 0) {
                    postsList.innerHTML = `<div style="text-align:center; padding:20px;">No results found for "${filterText}"</div>`;
                    return;
                }

                filtered.sort((a,b) => new Date(b.time) - new Date(a.time)).forEach((post, index) => {
                    const postDiv = document.createElement('div');
                    postDiv.className = 'post';
                    postDiv.innerHTML = `
                        <div class="post-header">
                            <span class="author-name">${post.authorName}</span>
                            <span class="post-time">${new Date(post.time).toLocaleTimeString()}</span>
                        </div>
                        <div class="post-text">${post.text}</div>
                        ${post.image ? `<img src="${post.image}">` : ''}
                        <div class="actions">
                            <button class="${post.liked ? 'liked' : ''}" onclick="toggleLike(${index})">üëç ${post.likes}</button>
                            <button onclick="toggleComments(${index})">üí¨ ${post.comments.length}</button>
                            <button onclick="sharePost(${index})">üîó Share</button>
                        </div>
                        <div class="comments-section" id="sec-${index}" style="display:none">
                            <div id="list-${index}">${post.comments.map(c => `<div class="comment-item">${c}</div>`).join('')}</div>
                        </div>
                    `;
                    postsList.appendChild(postDiv);
                });
            }

            // --- 4. Search Event Listener ---
            searchInput.addEventListener('input', (e) => {
                renderFeed(e.target.value);
            });

            // --- Globals for buttons ---
            window.toggleLike = (i) => {
                posts[i].liked = !posts[i].liked;
                posts[i].likes += posts[i].liked ? 1 : -1;
                save();
            };
            window.toggleComments = (i) => {
                const el = document.getElementById(`sec-${i}`);
                el.style.display = el.style.display === 'none' ? 'block' : 'none';
            };
            window.sharePost = (i) => {
                navigator.clipboard.writeText(posts[i].text);
                alert("Text copied!");
            };

            function save() {
                localStorage.setItem('fbPosts', JSON.stringify(posts));
                renderFeed(searchInput.value); // Re-render with current search term
            }

            renderFeed(); // Initial load
        });
    </script>
</body>
</html>